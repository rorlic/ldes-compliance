PREFIX ldes: <https://w3id.org/ldes#>
PREFIX owl:  <http://www.w3.org/2002/07/owl#>
PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX sh:   <http://www.w3.org/ns/shacl#>
PREFIX tree: <https://w3id.org/tree#>

ldes:EventStreamTimestampPathLimitedShape
        rdf:type        sh:PropertyShape;
        sh:description  "The path to the xsd:dateTime literal in each member that defines the order of the event stream";
        sh:maxCount     1;
        sh:message      "LPER-07 (ldes:timestampPath usage) - an event stream MUST NOT include multiple ldes:timestampPath properties";
        sh:name         "LDES timestampPath";
        sh:path         ldes:timestampPath;
        sh:severity     sh:Violation .

ldes:EventStreamTimestampPathSuggestedShape
        rdf:type        sh:PropertyShape;
        sh:description  "The path to the xsd:dateTime literal in each member that defines the order of the event stream";
        sh:message      "LPER-07 (ldes:timestampPath usage) - an event stream MAY include a ldes:timestampPath property to specify a property path, which when applied to a member, yields a xsd:dateTime value that can be used for comparing and ordering all the versions of the same non-version object";
        sh:minCount     1;
        sh:name         "LDES timestampPath";
        sh:path         ldes:timestampPath;
        sh:severity     sh:Info .

ldes:EventStreamVersionOfPathLimitedShape
        rdf:type        sh:PropertyShape;
        sh:description  "The path to the IRI in each member that defines the entity of which this member is a version";
        sh:maxCount     1;
        sh:message      "LPER-06 (ldes:versionOfPath usage) - an event stream MUST NOT include multiple ldes:versionOfPath properties";
        sh:name         "LDES versionOfPath";
        sh:path         ldes:versionOfPath;
        sh:severity     sh:Violation .

ldes:EventStreamVersionOfPathSuggestedShape
        rdf:type        sh:PropertyShape;
        sh:description  "The path to the IRI in each member that defines the entity of which this member is a version";
        sh:message      "LPER-06 (ldes:versionOfPath usage) - an event stream MAY include a ldes:versionOfPath property to specify the (non-version) object for which the member is a version of";
        sh:minCount     1;
        sh:name         "LDES versionOfPath";
        sh:path         ldes:versionOfPath;
        sh:severity     sh:Info .

ldes:EventStreamShapeRecommendedShape
        rdf:type        sh:PropertyShape;
        sh:description  "The SHACL shape the members of the collection adhere to";
        sh:message      "LPER-04 (tree:shape usage) - an event stream SHOULD refer using its tree:shape property to a shape defining its members";
        sh:minCount     1;
        sh:name         "TREE (shacl) shape";
        sh:path         tree:shape;
        sh:severity     sh:Warning .

tree:CollectionShapeSuggestedShape
        sh:deactivated  true .

ldes:EventStreamMemberNodeKindShape
        rdf:type        sh:PropertyShape;
        sh:description  "Links to the collectionâ€™s items that are the sh:targetNodes of the SHACL shape defined with tree:shape";
        sh:message      "LPER-03 (tree:member usage) - an event stream MUST refer using its tree:member property to a member's focus node (by a named node)";
        sh:name         "TREE member";
        sh:nodeKind     sh:IRI;
        sh:path         tree:member .

tree:CollectionMemberNodeKindShape
        sh:deactivated  true .

ldes:CollectionTypeSpecifiedShape
        rdf:type        sh:PropertyShape;
        sh:description  "A shape to validate that an ldes:EventStream is not double-typed with its base class tree:Collection .";
        sh:hasValue     tree:Collection;
        sh:message      "LPER-02 (not double-typed) - an event stream SHOULD NOT be double typed with tree:Collection (as this is implied)";
        sh:name         "LDES double-typed";
        sh:path         rdf:type .

ldes:EventStreamDoubleTypeShape
        rdf:type        sh:NodeShape;
        rdfs:comment    "A shape verifying that an ldes:EventStream is not double-typed in an LDES page."@en;
        rdfs:label      "EventStream class shape"@en;
        sh:not          ldes:CollectionTypeSpecifiedShape;
        sh:severity     sh:Warning;
        sh:targetClass  ldes:EventStream .

ldes:EventStreamTypeRequiredShape
        rdf:type        sh:PropertyShape;
        sh:description  "A shape to validate that an ldes:EventStream only appears once in a LDES page.";
        sh:maxCount     1;
        sh:message      "LPER-01 (contains ldes:EventStream) - an event stream MUST be a ldes:EventStream";
        sh:minCount     1;
        sh:name         "LDES count";
        sh:path         [ sh:inversePath  rdf:type ] .

ldes:EventStreamTypeShape
        rdf:type       sh:NodeShape;
        rdfs:comment   "A shape ensuring that an ldes:EventStream appears only once in a well-formed LDES page."@en;
        rdfs:label     "EventStream shape"@en;
        sh:property    ldes:EventStreamTypeRequiredShape;
        sh:targetNode  ldes:EventStream .

tree:CollectionTypeRequiredShape
        sh:deactivated  true .

ldes:EventClassStreamShape
        rdf:type        sh:NodeShape;
        rdfs:comment    "A shape describing well-formed LDES collections."@en;
        rdfs:label      "EventStream class shape"@en;
        sh:property     ldes:EventStreamTimestampPathLimitedShape , ldes:EventStreamTimestampPathSuggestedShape , ldes:EventStreamVersionOfPathLimitedShape , ldes:EventStreamVersionOfPathSuggestedShape , ldes:EventStreamShapeRecommendedShape , ldes:EventStreamMemberNodeKindShape;
        sh:targetClass  ldes:EventStream .

ldes:   owl:imports  ldes:Vocabulary .
